<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Image Compressor & Resizer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>Pro Image Tool</h1>
            <p>Compress, resize, and optimize your images with ease.</p>
        </header>

        <main>
            <form id="upload-form" enctype="multipart/form-data">
                
                <div id="upload-area">
                    <input type="file" id="image-input" name="image" accept="image/jpeg, image/png, image/gif" hidden>
                    <label for="image-input" class="upload-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                        <strong>Choose an image</strong>
                        <span>or drag and drop it here</span>
                    </label>
                </div>
                
                <div id="image-info-wrapper" class="hidden">
                    <div class="preview-area">
                        <img id="image-preview" src="#" alt="Image Preview">
                    </div>
                    <div id="image-details-area">
                        <h3>Image Details</h3>
                        <ul>
                            <li><strong>Filename:</strong> <span id="original-filename"></span></li>
                            <li><strong>Size:</strong> <span id="original-filesize"></span></li>
                            <li><strong>Dimensions (px):</strong> <span id="original-dims-px"></span></li>
                            <li><strong>Dimensions (in):</strong> <span id="original-dims-in"></span></li>
                            <li><strong>Dimensions (cm):</strong> <span id="original-dims-cm"></span></li>
                        </ul>
                    </div>
                </div>

                <div class="processing-options">
                    <h3>Processing Options</h3>
                    <div class="options-grid">
                        <div class="form-group">
                            <label for="width">Width</label>
                            <input type="number" id="width" name="width" placeholder="Original">
                        </div>
                        <div class="form-group">
                            <label for="height">Height</label>
                            <input type="number" id="height" name="height" placeholder="Original">
                        </div>
                        <div class="form-group">
                            <label for="unit">Unit</label>
                            <select id="unit" name="unit">
                                <option value="px" selected>Pixels (px)</option>
                                <option value="in">Inches (in)</option>
                                <option value="cm">Centimeters (cm)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group target-size-group">
                        <label for="target-size">Target File Size (Optional)</label>
                         <div class="input-group">
                            <input type="number" id="target-size" name="target_size" placeholder="e.g., 500" min="1">
                            <select id="target-size-unit" name="target_size_unit">
                                <option value="kb" selected>KB</option>
                                <option value="mb">MB</option>
                            </select>
                         </div>
                         <small>This will override the quality slider for best results.</small>
                    </div>

                    <div id="quality-slider-group" class="form-group quality-group">
                        <label for="quality">Compression Quality: <span id="quality-value">85</span>%</label>
                        <input type="range" id="quality" name="quality" min="1" max="100" value="85">
                    </div>
                </div>
                
                <button type="submit" id="submit-btn" disabled>Process Image</button>
            </form>

            <div id="status-area"></div>

            <div id="result-area" class="hidden">
                <h2>Success!</h2>
                <div id="download-container"></div>
            </div>
        </main>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>